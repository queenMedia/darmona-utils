!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["darmona-utils"]=t():e["darmona-utils"]=t()}(this,(()=>(()=>{"use strict";var e={346:function(e,t){var _=this&&this.__assign||function(){return _=Object.assign||function(e){for(var t,_=1,r=arguments.length;_<r;_++)for(var o in t=arguments[_])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},_.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.aggregateMetrics=t.SKIP_REASONS=t.REVENUES=t.COMMON_METRICS=void 0,t.COMMON_METRICS=["TOTAL_CLICKS","GOT_TO_WP","GOT_TO_BP","UNIQUE_IP_GOT_TO_BP","CLICKED_ON_BP","UNIQUE_IP_CLICKED_ON_BP","CONV","FTD"],t.REVENUES=["USD_REV","EUR_REV"],t.SKIP_REASONS=["QUERY_RULES_SKIP","IP_BLOCKED","FIRST_IMPRESSIONS_SKIP","NO_ENDPOINT_TO_DELIVER"],t.aggregateMetrics=function(e,r,o){void 0===r&&(r=t.COMMON_METRICS),void 0===o&&(o={lpcuCost:0}),console.log("calc aggregations");var n=function(e,t){for(var _=Object.create({}),r=0,o=e;r<o.length;r++)for(var n=o[r],O=0,i=t;O<i.length;O++){var C=i[O];_[C]=void 0!==_[C]?_[C]+n[C]:n[C]}return _}(e,r),O=0,i=0,C=n.UNIQUE_IP_CLICKED_ON_BP?n.USD_REV/n.UNIQUE_IP_CLICKED_ON_BP:0;return o.lpcuCost&&(O=o.lpcuCost*n.UNIQUE_IP_CLICKED_ON_BP,i=n.USD_REV-O,C=C&&i/n.UNIQUE_IP_CLICKED_ON_BP),_(_({CMP:"Totals",aggregationRow:!0},n),{epc:C,clickCost:O,profit:i,"LP CTR":n.GOT_TO_WP?n.CLICKED_ON_BP/n.GOT_TO_WP*100:0,CONV_TO_LPCLICK:n.UNIQUE_IP_CLICKED_ON_BP?n.CONV/n.UNIQUE_IP_CLICKED_ON_BP*100:0,FTD_TO_LPCLICK:n.UNIQUE_IP_CLICKED_ON_BP?n.FTD/n.UNIQUE_IP_CLICKED_ON_BP*100:0,FTD_TO_CONV:n.CONV?n.FTD/n.CONV*100:0})}},156:function(e,t,_){var r=this&&this.__createBinding||(Object.create?function(e,t,_,r){void 0===r&&(r=_);var o=Object.getOwnPropertyDescriptor(t,_);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[_]}}),Object.defineProperty(e,r,o)}:function(e,t,_,r){void 0===r&&(r=_),e[r]=t[_]}),o=this&&this.__exportStar||function(e,t){for(var _ in e)"default"===_||Object.prototype.hasOwnProperty.call(t,_)||r(t,e,_)};Object.defineProperty(t,"__esModule",{value:!0}),o(_(346),t)}},t={};return function _(r){var o=t[r];if(void 0!==o)return o.exports;var n=t[r]={exports:{}};return e[r].call(n.exports,n,n.exports,_),n.exports}(156)})()));