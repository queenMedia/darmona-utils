!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["darmona-utils"]=t():e["darmona-utils"]=t()}(this,(()=>(()=>{"use strict";var e={346:function(e,t){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,r=1,_=arguments.length;r<_;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.aggregateMetrics=t.SKIP_REASONS=t.REVENUES=t.COMMON_METRICS=void 0,t.COMMON_METRICS=["TOTAL_CLICKS","GOT_TO_WP","GOT_TO_BP","UNIQUE_IP_GOT_TO_BP","CLICKED_ON_BP","UNIQUE_IP_CLICKED_ON_BP","CONV","FTD"],t.REVENUES=["revUsd","revEur"],t.SKIP_REASONS=["QUERY_RULES_SKIP","IP_BLOCKED","FIRST_IMPRESSIONS_SKIP","NO_ENDPOINT_TO_DELIVER"],t.aggregateMetrics=function(e,_){void 0===_&&(_=t.COMMON_METRICS),console.log("calc aggregations");var o=function(e,t){for(var r=Object.create({}),_=0,o=e;_<o.length;_++)for(var n=o[_],O=0,i=t;O<i.length;O++){var a=i[O];r[a]=void 0!==r[a]?r[a]+n[a]:n[a]}return r}(e,_);return r(r({CMP:"Totals",aggregationRow:!0},o),{epc:o.CLICKED_ON_BP?o.revUsd/o.CLICKED_ON_BP:0,"LP CTR":o.GOT_TO_WP?o.CLICKED_ON_BP/o.GOT_TO_WP*100:0,CONV_TO_LPCLICK:o.UNIQUE_IP_CLICKED_ON_BP?o.CONV/o.UNIQUE_IP_CLICKED_ON_BP*100:0,FTD_TO_LPCLICK:o.UNIQUE_IP_CLICKED_ON_BP?o.FTD/o.UNIQUE_IP_CLICKED_ON_BP*100:0,FTD_TO_CONV:o.CONV?o.FTD/o.CONV*100:0})}},156:function(e,t,r){var _=this&&this.__createBinding||(Object.create?function(e,t,r,_){void 0===_&&(_=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,_,o)}:function(e,t,r,_){void 0===_&&(_=r),e[_]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||_(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(346),t)}},t={};return function r(_){var o=t[_];if(void 0!==o)return o.exports;var n=t[_]={exports:{}};return e[_].call(n.exports,n,n.exports,r),n.exports}(156)})()));